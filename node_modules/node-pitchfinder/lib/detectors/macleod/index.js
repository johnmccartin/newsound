'use strict';

var _require = require('../../../build/Release/addon'),
    MacLeod = _require.MacLeod;

module.exports = function () {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var detector = new MacLeod(options.bufferSize, options.sampleRate, options.cutoff, options.freqCutoff, options.probabilityThreshold);

  function macLeod(data) {
    var actualData = data;
    if (!(data instanceof Float64Array)) actualData = Float64Array.from(data);
    return detector.getPitch(actualData);
  }
  macLeod.getResult = function (data) {
    var actualData = data;
    if (!(data instanceof Float64Array)) actualData = Float64Array.from(data);
    return detector.getResult(actualData);
  };

  return macLeod;
};