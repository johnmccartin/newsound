'use strict';

var _require = require('../../../build/Release/addon'),
    Yin = _require.Yin;

module.exports = function () {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var detector = new Yin(options.sampleRate, options.threshold, options.probabilityThreshold);

  function YIN(data) {
    var actualData = data;
    if (!(data instanceof Float64Array)) actualData = Float64Array.from(data);
    return detector.getPitch(actualData);
  }
  YIN.getResult = function (data) {
    var actualData = data;
    if (!(data instanceof Float64Array)) actualData = Float64Array.from(data);
    return detector.getResult(actualData);
  };

  return YIN;
};